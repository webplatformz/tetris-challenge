import{r as e,h as r,H as a}from"./p-6b4573be.js";const t=class{constructor(r){e(this,r)}render(){if(this.state)return r(a,null,r("div",{class:"board"},this.state.flatMap((e=>e.map((e=>r("div",{class:"block","data-type":e})))))))}};let d;function o(e){s({type:"MOVE_PIECE",direction:e})}function c(e){s({type:"ROTATE_PIECE",direction:e})}function s(e){d.send(JSON.stringify(e))}t.style='.board{display:grid;grid-template-columns:repeat(10, 3rem);grid-template-rows:repeat(20, 3rem)}.board [data-type="0"]{background:radial-gradient(circle, #333333 0%, black 100%);border:0.1rem solid black;border:0.1rem solid #333333}.board [data-type="1"]{background:radial-gradient(circle, #ff8f66 0%, orangered 100%);border:0.1rem solid #cc3700}.board [data-type="2"]{background:radial-gradient(circle, #66d9ff 0%, deepskyblue 100%);border:0.1rem solid #0099cc}.board [data-type="3"]{background:radial-gradient(circle, #0000f1 0%, darkblue 100%);border:0.1rem solid #000058}.board [data-type="4"]{background:radial-gradient(circle, #ffff66 0%, yellow 100%);border:0.1rem solid #cccc00}.board [data-type="5"]{background:radial-gradient(circle, #00e600 0%, green 100%);border:0.1rem solid #004d00}.board [data-type="6"]{background:radial-gradient(circle, #c43aff 0%, darkviolet 100%);border:0.1rem solid #7000a0}.board [data-type="7"]{background:radial-gradient(circle, #ff6666 0%, red 100%);border:0.1rem solid #cc0000}';const i=class{constructor(r){e(this,r),this.currentBoard=[[]],this.baseBoard=[[]]}render(){return r(a,null,r("header",{class:"header"},r("h1",null,"Tetris")),r("main",{class:"board"},r("app-board",{state:this.currentBoard})))}connectedCallback(){var e;("myfancyusername",new Promise((e=>{d=new WebSocket("ws://localhost:8080/tetris/myfancyusername"),d.onopen=()=>{console.log("WebSocket opened"),e()},d.onerror=console.error,d.onclose=e=>console.log("WebSocket closed",e)}))).then((()=>{s({type:"CREATE_GAME"})})),e=e=>{switch(console.log("Received message",e),e.type){case"BOARD":this.baseBoard=e.board,this.currentBoard=e.board;break;case"PIECE":this.currentBoard=function(e,r){const a=r.movingPiece.map((e=>e.x)),t=r.movingPiece.map((e=>e.y));return e.map(((e,d)=>t.includes(d)?e.map(((e,t)=>a.includes(t)?r.pieceType:e)):e))}(this.baseBoard,e)}},d.onmessage=({data:r})=>e(JSON.parse(r))}keydownHandler({key:e}){switch(e){case"ArrowLeft":o("LEFT");break;case"ArrowRight":o("RIGHT");break;case"ArrowUp":c("RIGHT");break;case"ArrowDown":c("LEFT")}}};i.style=".board{display:flex;justify-content:center}.header{text-align:center;display:block;text-transform:uppercase;font-size:1.25rem}";const n=class{constructor(r){e(this,r)}render(){return r("app-game",null)}};n.style=":host{display:flex;justify-content:center}";export{t as app_board,i as app_game,n as app_root}